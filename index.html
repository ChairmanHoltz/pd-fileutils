<!DOCTYPE html>
<html>
<head>
<title>Title of the document</title>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="http://underscorejs.org/underscore-min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="https://raw.github.com/sebpiq/pd-fileutils/master/dist/pd-fileutils-latest.js"></script>
  <link href="css/code-highlight.css" rel="stylesheet" />

</head>

<body>

  <div id="svg">
  </div>

  <div id="json">
    <pre><code data-language="javascript"></code></pre>
  </div>

  <div id="pd">
    <pre><code></code></pre>
  </div>

  <div id="loading">loading ...</div>

  <script>
    var gistParamRe = /gist=(\w*)/
      , searchResult
      , gistLoaded = function(resp) {
        var files = resp.data.files
          , content = files[Object.keys(files)[0]].content
          , patch = pdfu.parse(content)
          , patchSvg = pdfu.renderSvg(patch, {svgFile: false})
        $('#svg').html(patchSvg)
        $('#json code').html(JSON.stringify(patch, null, 4))
        $('#pd code').html(content)
      }

    if (searchResult = gistParamRe.exec(window.location.search)) {
      var gistUrl = 'https://api.github.com/gists/'
        + searchResult[1] + '?callback=gistLoaded'
      $('<script>', {src: gistUrl}).appendTo('body')
    }
    gistLoaded()

  </script>

  <script src="https://raw.github.com/ccampbell/rainbow/master/js/rainbow.min.js"></script>
  <script src="https://raw.github.com/ccampbell/rainbow/master/js/language/generic.js"></script>
  <script src="https://raw.github.com/ccampbell/rainbow/master/js/language/javascript.js"></script>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17637518-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</body>

</html>
